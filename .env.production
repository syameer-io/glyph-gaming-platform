# =============================================================================
# GLYPH PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# This file is a template for production deployment on DigitalOcean.
#
# BEFORE DEPLOYING:
# 1. Replace YOUR_DROPLET_IP with your actual DigitalOcean Droplet IP
# 2. Replace all credential placeholders (marked with YOUR_*)
# 3. Generate new credentials for services (see notes below each section)
# 4. Copy this file to .env on the production server
#
# See docs/digitalocean-deployment/ for complete deployment guide.
# =============================================================================

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================
APP_NAME="Glyph"
APP_ENV=production
APP_KEY=base64:vyNf7Ga6NHnzQwDqj4xGVrpOehmx6M+3rnGtES70yo4=
APP_DEBUG=false
APP_TIMEZONE=Asia/Kuala_Lumpur
APP_URL=http://YOUR_DROPLET_IP

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
APP_MAINTENANCE_STORE=database

BCRYPT_ROUNDS=12

# =============================================================================
# LOGGING
# =============================================================================
# Production uses daily rotation to prevent log files from growing too large
LOG_CHANNEL=daily
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error

# =============================================================================
# DATABASE
# =============================================================================
# SECURITY: Set a strong password on the production server
# Generate with: openssl rand -base64 16
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=glyph
DB_USERNAME=glyph_user
DB_PASSWORD=YOUR_STRONG_DB_PASSWORD

# =============================================================================
# SESSION, CACHE, QUEUE
# =============================================================================
SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null
SESSION_SECURE_COOKIE=false

CACHE_STORE=database
FILESYSTEM_DISK=local
QUEUE_CONNECTION=database

# =============================================================================
# REDIS (Optional - for future scaling)
# =============================================================================
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# =============================================================================
# LARAVEL REVERB - WEBSOCKET SERVER
# =============================================================================
# Real-time features: chat, voice presence, notifications
#
# NOTE: REVERB_PORT=80 because nginx proxies /app to internal port 8080
# The Reverb server runs on 8080, but clients connect via nginx on port 80
BROADCAST_CONNECTION=reverb

REVERB_APP_ID=glyph_production
REVERB_APP_KEY=zq1jrlq5eosqtcxzv6wmhjohd5bb1raj
REVERB_APP_SECRET=y0qpsooj4vcqb0bjqgdg7dp7jfyyeku7

# Client connection settings (through nginx proxy)
REVERB_HOST=YOUR_DROPLET_IP
REVERB_PORT=80
REVERB_SCHEME=http

# Server binding settings (internal)
REVERB_SERVER_HOST=0.0.0.0
REVERB_SERVER_PORT=8080

# Security: Restrict WebSocket connections to your domain/IP only
REVERB_ALLOWED_ORIGINS=http://YOUR_DROPLET_IP

# =============================================================================
# VITE FRONTEND - WEBSOCKET CONNECTION
# =============================================================================
# These are passed to the frontend JavaScript for WebSocket connection
VITE_APP_NAME="${APP_NAME}"
VITE_REVERB_APP_KEY="${REVERB_APP_KEY}"
VITE_REVERB_HOST="${REVERB_HOST}"
VITE_REVERB_PORT=80
VITE_REVERB_SCHEME=http

# =============================================================================
# STEAM INTEGRATION
# =============================================================================
# SECURITY: Generate a NEW API key before production deployment!
# Get your key from: https://steamcommunity.com/dev/apikey
#
# WARNING: The key below is for development only. Generate a new one!
STEAM_API_KEY=YOUR_NEW_STEAM_API_KEY
STEAM_CALLBACK_URL="${APP_URL}/auth/steam/callback"

# =============================================================================
# AGORA VOICE CHAT
# =============================================================================
# Required for voice channel functionality
# Get credentials from: https://console.agora.io
#
# Steps:
# 1. Create project at console.agora.io
# 2. Enable App Certificate
# 3. Copy App ID and App Certificate
AGORA_APP_ID=YOUR_AGORA_APP_ID
AGORA_APP_CERTIFICATE=YOUR_AGORA_APP_CERTIFICATE
AGORA_TOKEN_EXPIRY=3600

# =============================================================================
# EMAIL - GMAIL SMTP
# =============================================================================
# SECURITY: Generate a NEW App Password before production deployment!
# Get App Password from: https://myaccount.google.com/apppasswords
#
# Steps:
# 1. Enable 2-Factor Authentication on your Google account
# 2. Go to App Passwords
# 3. Create new App Password for "Mail" on "Other (Custom name)"
# 4. Use the 16-character password generated
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=YOUR_GMAIL_ADDRESS
MAIL_PASSWORD=YOUR_GMAIL_APP_PASSWORD
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@glyph.com"
MAIL_FROM_NAME="${APP_NAME}"

# =============================================================================
# TELEGRAM BOT (Optional)
# =============================================================================
# For server notifications and alerts
# Create bot via @BotFather on Telegram
TELEGRAM_BOT_TOKEN=
TELEGRAM_WEBHOOK_SECRET=

# =============================================================================
# TEAM SETTINGS
# =============================================================================
TEAM_INVITATION_EXPIRY_DAYS=7
TEAM_MAX_PENDING_INVITATIONS=20

# =============================================================================
# PRE-DEPLOYMENT CHECKLIST
# =============================================================================
# Before copying this file to production, ensure you have:
#
# [ ] Replaced YOUR_DROPLET_IP with actual IP (3 occurrences)
# [ ] Set YOUR_STRONG_DB_PASSWORD
# [ ] Generated new STEAM_API_KEY from Steam
# [ ] Set AGORA_APP_ID and AGORA_APP_CERTIFICATE from Agora
# [ ] Generated new GMAIL App Password
# [ ] Set MAIL_USERNAME to your Gmail address
# [ ] (Optional) Set TELEGRAM_BOT_TOKEN if using Telegram notifications
#
# On the server after deployment:
# [ ] Run: php artisan key:generate (if APP_KEY is empty)
# [ ] Run: php artisan migrate
# [ ] Run: php artisan config:cache
# [ ] Run: php artisan route:cache
# [ ] Run: php artisan view:cache
# =============================================================================
