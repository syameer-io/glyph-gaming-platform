# Apache Virtual Host Configuration for socialgaminghub.test with SSL/HTTPS
#
# INSTALLATION INSTRUCTIONS:
# 1. Copy this file to: C:\laragon\etc\apache2\sites-enabled\auto.socialgaminghub.test.conf
# 2. Restart Apache in Laragon
# 3. Access site via: https://socialgaminghub.test

# HTTP (Port 80) - Redirect to HTTPS for security
<VirtualHost *:80>
    DocumentRoot "C:/laragon/www/socialgaminghub/public"
    ServerName socialgaminghub.test
    ServerAlias *.socialgaminghub.test

    # Redirect all HTTP traffic to HTTPS
    <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteCond %{HTTPS} off
        RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
    </IfModule>
</VirtualHost>

# HTTPS (Port 443) - Secure Connection for Voice Chat
<VirtualHost *:443>
    DocumentRoot "C:/laragon/www/socialgaminghub/public"
    ServerName socialgaminghub.test
    ServerAlias *.socialgaminghub.test

    <Directory "C:/laragon/www/socialgaminghub/public">
        AllowOverride All
        Require all granted
    </Directory>

    # SSL Configuration
    SSLEngine on

    # SSL Certificate Files (generated by Laragon)
    # NOTE: Update these paths if Laragon generates certificates in a different location
    SSLCertificateFile "C:/laragon/etc/ssl/socialgaminghub.test/server.crt"
    SSLCertificateKeyFile "C:/laragon/etc/ssl/socialgaminghub.test/server.key"

    # Optional: SSL Certificate Chain (if you have one)
    # SSLCertificateChainFile "C:/laragon/etc/ssl/socialgaminghub.test/chain.pem"

    # Modern SSL/TLS Configuration (recommended)
    SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite HIGH:!aNULL:!MD5:!3DES
    SSLHonorCipherOrder on

    # HTTP/2 Support (if available)
    <IfModule http2_module>
        Protocols h2 http/1.1
    </IfModule>

    # Security Headers
    <IfModule mod_headers.c>
        # Prevent clickjacking
        Header always set X-Frame-Options "SAMEORIGIN"

        # Prevent MIME type sniffing
        Header always set X-Content-Type-Options "nosniff"

        # Enable XSS protection
        Header always set X-XSS-Protection "1; mode=block"

        # Strict Transport Security (HSTS) - tells browsers to always use HTTPS
        # WARNING: This will force HTTPS for 1 year. Comment out if you need HTTP access.
        # Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
    </IfModule>
</VirtualHost>
